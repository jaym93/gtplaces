<?xml version="1.0"?>
<api>
	<description>
		<![CDATA[This is an API to interact with GTplaces widget]]>
	</description>

<!--
	<command id='idnames' security='public'>
		<description><![CDATA[Returns filtered list of all buildings(building id,name,address,latitude,longitude and list of tags)]]></description>
		<index>
			<description><![CDATA[Request - [SERVER_NAME]/api/gtplaces/idnames/name,address,image_url (Returns list of all buildings with building name,address and image url)]]></description>
			<action file='gtplaces.php'><![CDATA[getNames();]]></action>
		</index>
	</command>	
-->
	<command id='buildings' security='public'>
   	<description></description>
	   <index>
   	   <description><![CDATA[Returns list of all buildings with building id,name,address,latitude,longitude,image url and tags]]></description>
      	<action file='gtplaces.php'><![CDATA[getTagsList();]]></action>
	   </index>
		<get>
         <description><![CDATA[Search by Building name]]></description>
         <action file='gtplaces.php'><![CDATA[searchByBuildingName($_REST['buildings']);]]></action>
      </get>
   </command>
	<command id='buildings_tags' security='public'>
      <description></description>
      <index>
         <description><![CDATA[Returns list of all buildings with building id and tags]]></description>
         <action file='gtplaces.php'><![CDATA[getBuildingsTags();]]></action>
      </index>
   </command>
   <command id='tags' security='public'>
		<description></description>
      <index>
         <description><![CDATA[Returns list of all tags with tag id,building id,tagname,user who created the tag,number of tags,number of flags]]></description>
         <action file='gtplaces.php'><![CDATA[getTagNames();]]></action>
      </index>
      <get>
         <description><![CDATA[Search by tagname]]></description>
         <action file='gtplaces.php'><![CDATA[searchByTagName($_REST['tags']);]]></action>
      </get>
		<post>
         <description><![CDATA[Add a tag]]></description>
         <action file='gtplaces.php'><![CDATA[addTag($_POST['bid'],$_POST['tag']);]]></action>
			<param id='bid'>
         	<description><![CDATA[Building id]]></description>
            <exampleValue><![CDATA[30]]></exampleValue>
         </param>
			<param id='tag'>
            <description><![CDATA[Tag Name]]></description>
            <exampleValue><![CDATA[admin]]></exampleValue>
         </param>
      </post>
		<command id='flag' security='public'>
			<description></description>
	      <post>
   	      <description><![CDATA[Flag a tag]]></description>
      	   <action file='gtplaces.php'><![CDATA[flagTag($_POST['bid'],$_REST['tags']);]]></action>
				<param id='bid'>
            	<description><![CDATA[Building id]]></description>
   	         <exampleValue><![CDATA[30]]></exampleValue>
      	   </param>
	      </post>
   	</command>
	</command>
</api>
